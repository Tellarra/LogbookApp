<!doctype html>
<html>
<head>
<meta charset="utf-8">
<!--Import Google Icon Font-->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!--Import materialize.css-->
<link type="text/css" rel="stylesheet" href="../css/materialize.css"  media="screen,projection"/>
<!--Let browser know website is optimized for mobile-->
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link type="text/css" rel="stylesheet" href="../css/mainStylesheet.css"/>
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="../js/materialize.min.js"></script>
<!-- Plugin listview -->
<script src="../Plugins/jqmEditable/jqm.editable.listview.min.js"></script>
<script>
//Create Database
var createTableSQL = "CREATE TABLE IF NOT EXISTS tblProfile (fldLicenceNo TEXT PRIMARY KEY, fldName TEXT PRMARY KEY, fldBirth DATE, fldPermitDate DATE, fldPhone TEXT);";
var insertSQL = "INSERT INTO tblProfile (fldLicenceNo, fldName, fldPhoneNo) VALUES (?, ?, ?);";
var showSQL = "SELECT * FROM tblProfile;";
var updateRecordSQL = "UPDATE tblProfile SET fldName=?, fldPhoneNo=? WHERE fldLicenceNo = ?;";
var deleteSQL = "DELETE from tblProfile WHERE fldLicenceNo=?;";
var	deleteAllSQL = "DELETE from tblProfile";
var dropTable = "DROP TABLE tblProfile";
var db = null;
$(document).ready(function(){
	document.addEventListener("deviceready", onDeviceReady(), false);
//Hide button
	$("#saveInfo").hide();
//NavBar
    $('.sidenav').sidenav();
//Date picker
	$('.datepicker').datepicker();
//Collapsible
	$('.collapsible').collapsible();

//Edit button
	$("#editProfile").on("click", function() {
		$("#editProfile").hide();
		$("#saveInfo").show();
		
		$("input").each(function() {
			$("input").prop("disabled",false);
		});
	});
//Save Button
	$("#saveInfo").on("click", function() {
		$("#editProfile").show();
		$("#saveInfo").hide();
		
		$("input").each(function() {
			$("input").prop("disabled",true);
		});
	});
	
//Profile picture
 var readURL = function(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('.profile-pic').attr('src', e.target.result);
            }
    
            reader.readAsDataURL(input.files[0]);
        }
    }

    $(".file-upload").on('change', function(){
        readURL(this);
    });
    
    $(".upload-button").on('click', function() {
       $(".file-upload").click();
    });
});	
	
var onDeviceReady = function() {
  console.log("In deviceready");
  try {
    if( !window.openDatabase )
      alert("This device does NOT support databases");
    else {
      /*var shortName = "Sessions";
      var version = "1";
      var displayName = "Sessions";
      var maxSize = 1024;*/
      db = window.openDatabase("Log Book", "1", "Log Book", "1024");
      console.log("Database opened");
      db.transaction(populateDB, onError);
    } // end else
  }
  catch(err) {
    console.log("Error: " + err);
  }
};

var populateDB = function(trans) {
  db.transaction(function(trans) {
	 trans.executeSql(createTableSQL,[]);
	 //trans.executeSql(dropTable,[]);
	  console.log("Table created");
  }); // end of transaction
};
	
var onError = function(err) {
	var str = "";
	switch(err.code)	{
		case	0:  str += "Non database error: " + err.message;
					break;
		case	1:	str += "Some database error: " + err.message;
					break;
		case	2:	str += "Wrong database version: " + err.message;
					break;
		case	3:	str += "Data set too large to return from query: " + err.message;
					break;
		case	4: 	str += "Storage limit exceeded: " + err.message;
					break;
		case	5:	str += "Lock contension error: " + err.message;
					break;
		case	6:	str += "Constraint failure: " + err.message;
					break;
		default	:	str += "Error: " + err.code + " " + err.message;
					break;
	}
	console.log(str);
}

var clearTxt = function clearTxt() {
  setTimeout(function(){$(".msg").html("");}, 1000);
}


	
</script>
<title>Profile</title>
</head>

<body>
<nav>
    <div class="nav-wrapper navbar">
      <a href="#!" class="center brand-logo">Profile</a>
      <a href="../index.html" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons left">arrow_back</i></a>
      <ul class="left hide-on-med-and-down">
        <li><a href="../index.html" data-target="mobile-demo"><i class="material-icons left">arrow_back</i></a></li>
      </ul>
    </div>
  </nav>
 <h1 align="center">Your profile</h1> 
 <p class="center-block">
	<img class="profile-pic" src="../images/empty-profile.png" />
		<div class="upload-button center-block">Upload Image</div>
	<input class="file-upload" type="file" accept="image/*"/>
 </p>
 <br />
 <div class="col s12 m7 cards">
    <div class="card horizontal">
      <div class="card-stacked">
        <div class="card-content">
        <span class="card-title">You</span>
			<div class="row">
				<form class="col s12">
						  <div class="row">
								<div class="input-field col s12">
							  		<input disabled value="Adele Richard" id="txtName" type="text" class="validate">
							  		<label for="txtName"> Name</label>
								</div>
						  </div>
						  <div class="row">
								<div class="input-field col s12">
							  		<input disabled value="06/01/1995" id="txtBirthDate" type="text" class="datepicker">
							  		<label for="txtBirthDate">Birthdate</label>
								</div>
						  </div>
						  <div class="row">
								<div class="input-field col s12">
							  		<input disabled value="059874658" id="permitNo" type="number" class="validate" max="9" min="9">
							  		<label for="permitNo">Licence Number</label>
								</div>
						  </div>
						  <div class="row">
								<div class="input-field col s12">
							  		<input disabled value="01/03/2018" id="txtPermitDate" type="text" class="datepicker">
							  		<label for="txtPermitDate">Permit Date</label>
								</div>
						  	</div>
							<div class="row">
							<div class="input-field col s12">
				  				<input disabled value="0485965863" id="telNo" type="tel" class="validate">
				  				<label for="telNo">Phone Number</label>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
		<div class="col s12">
		<button class="btn waves-effect waves-light btnPadding right red accent-2" id="editProfile">Edit</button>
 		<button class="btn waves-effect waves-light right" type="submit" name="action" id="saveInfo">Save
    		<i class="material-icons right">send</i>
  		</button>
  		</div> 	 
	</div>
</body>
</html>
